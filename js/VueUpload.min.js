!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=22)}({22:function(e,t,i){"use strict";i.r(t);var s=Vue.component("ImgDisplay",{template:'\n        <div>\n            <img v-show="checkFileType == \'image\'" class="qq-thumbnail-selector" ref="imgRef" qq-max-size="100" qq-server-scale>\n            <span v-if="checkFileType == \'application\'" class="mr-2 icon icon-Group-3318"></span>\n        </div>\n    ',name:"ImgDisplay",props:["img"],data:function(){return{src:"",reader:null}},watch:{img:{immediate:!0,handler:function(e){e&&(this.src=e,this.setImgSrc())}}},mounted:function(){this.setImgSrc()},computed:{checkFileType:function(){return this.img.type.substr(0,this.img.type.indexOf("/"))}},methods:{setImgSrc:function(){var e=this;return this.reader=new FileReader,this.reader.readAsDataURL(this.img),this.reader.onload=function(t){e.src=t.target.result,e.$refs.imgRef.src=t.target.result}}}});function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=function(e,t,i,s,n){return new Promise((function(o,a){fetch(e,{method:t,async:!1,crossDomain:!0,processData:!1,contentType:!1,headers:r({Authorization:"Client-ID ".concat(i),Accept:"application/json"},n),body:s}).then((function(e){e.ok?o(e.json()):a("Upload Failed , Please try again")}),(function(){return a("Upload Failed , Please try again")}))}))},l=Vue.component("VueUploadList",{template:'\n      <li v-if="show" :class="{\'qq-upload-fail\': error , \'qq-upload-success border-top border-bottom\' : success}">\n      <div class="d-flex">\n        <img-display :img="file" class="align-self-center"/>\n        <div class="qq-file-information">\n          <span class="qq-upload-file-selector qq-upload-file">{{ file.name }}</span>\n          <span class="qq-upload-size-selector qq-upload-size">{{ Math.floor(fileSize / 1024 / 1024) >= 1 ?  Math.floor(fileSize / 1024 / 1024) + "ميجابايت" : Math.floor(fileSize / 1024) + "كيلوبايت" }} </span>\n          <small role="status" class="qq-upload-status-text-selector qq-upload-status-text">{{ status }}</small>\n        </div>\n      </div>\n      <div class="qq-btn-group">\n        <button v-if="success || error" @click="handleDelete(file)" type="button"\n                class="qq-upload-cancel-selector btn btn-ghost fill-primary-red" data-dismiss="alert"\n                aria-label="Close">\n          <span class="icon-clearclose"></span>\n        </button>\n        <button v-if="error" @click="uploadFile(file , true)" type="button"\n                class="qq-upload-retry-selector btn btn-ghost fill-primary-light-green" data-dismiss="alert"\n                aria-label="Close">\n          <span class="icon-refresh"></span>\n        </button>\n      </div>\n      </li>\n    ',name:"VueUploadList",components:{ImgDisplay:s},props:{file:{type:File,required:!0},api:{type:String,required:!0},token:{type:String,required:!0},headers:{type:Object},extension:{type:String},maxSize:{type:Number,default:null}},data:function(){return{data:this.file,error:!1,success:null,uploadFileId:null,show:!0,status:""}},computed:{fileSize:function(){return Math.round(this.file.size,0)},_localization:function(){return"ar"===document.documentElement.lang.toLowerCase()?{status:"جاري التحميل ..",maxSizeMsg:"حجم الملف اكبر من المسموح به ",extensionMsg:"فشل الرفع, نوع الملف غير مسموح به",successUpload:"تم التحميل بنجاح"}:{status:"Loading ....",maxSizeMsg:"file size is larger than maximum allowable size value",extensionMsg:"Upload failed, file extension is not allowed",successUpload:"Uploaded successfully"}}},watch:{file:{immediate:!0,handler:function(e){e&&(this.progress=0,this.file.size&&this.uploadFile(this.file))}}},mounted:function(){},methods:{uploadFile:function(e,t){var i=this;this.status=this._localization.status;var s=Math.floor(this.maxSize/1024/1024),n=e.name.split("."),r=n[n.length-1];if(e.size)if(this.maxSize&&e.size>this.maxSize)this.error=!0,this.success=!1,this.status="".concat(this._localization.maxSizeMsg," ").concat(s," ميجابايت"),this.$emit("uploadFailed",this.error),t||this.$emit("setProgress");else if(this.extension.toLowerCase().includes(r)){this.$emit("showProgress",!0);var o=new FormData;o.append("qqfile",e),console.log("data",o),a(this.api,"post",this.token,o,this.headers).then((function(e){e.success&&e.data.id?(i.error=!1,i.success=!0,i.status=i._localization.successUpload,i.uploadFileId=e.data.id,i.$emit("uploaded",e.data),i.$emit("uploadFailed",i.error),t||i.$emit("setProgress")):(i.error=!0,i.success=!1,i.status=e.error,i.$emit("uploadFailed",i.error),t||i.$emit("setProgress"))})).catch((function(e){i.error=!0,i.success=!1,i.status=e,i.$emit("uploadFailed",i.error),t||i.$emit("setProgress")}))}else this.error=!0,this.success=!1,this.status=this._localization.extensionMsg,this.$emit("uploadFailed",this.error)},handleDelete:function(){this.$emit("delete",this.uploadFileId),this.show=!1}}});function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}var d=Vue.component("VueUpload",{template:'\n      <div  :class="{\'qq-uploader-selector\': true , \'qq-uploader\':true , \'qq-uploader-small\': size != \'large\'}">\n            <div class="file-uploader-zone">\n                <div class="qq-upload-drop-area-selector qq-upload-drop-area qq-hide">\n                    <span class="qq-upload-drop-area-text-selector"></span>\n                </div>\n                <div class="buttons" @dragover="dragover" @dragleave="dragleave" @drop="drop" @click="trigger"> \n                        <input type="file" maxlength="14" v-bind="allowMultiple" name="fields[assetsFieldHandle][]" id="assetsFieldHandle" \n                            class="d-none" @change="onChange($event)" ref="file" :accept="this.extension" />\n  \n                    <div class="uploader-button-caption">\n                    <span class="icon-attachment"></span>\n                        <span>{{this._localization.dropFileMsg}}\n                            <div class="qq-upload-button-selector qq-upload-button">\n                                    <span>{{this._localization.chooseFileMsg}}</span>\n                            </div>\n                        </span>\n                       <div>\n                       <p>{{this._localization.extensionFileText}}</p>\n                       </div>\n\n                    </div>\n                </div>\n            </div>\n            <ul class="qq-upload-list-selector qq-upload-list"  v-if="this.filelist.length" v-cloak>\n                <template v-if="showprogress">\n                    <div class="new-upload-status mb-2 p-3" v-if="this.show">\n                        <span class="uploading-label">تحميل الملف</span>\n                        <div class="progress">\n                            <div class="progress-bar" role="progressbar" v-bind:style="progressWidth" v-bind:aria-valuenow="progress" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                        <span class="uploading-percentage">{{progress}}%</span>\n                    </div> \n                </template>\n                <div v-for="(file , index) in filelist" :key="index">\n                    <vue-upload-list @setProgress="setProgress()" :extension="extension" :headers="headers" :file="file" :maxSize="maxSize" :api="api" :token="token" @uploaded="handleUploaded($event)" @delete="handleDelete($event, index)" @showProgress="showProgress($event)"/>\n                </div>\n            </ul>\n    </div>\n    ',name:"VueUpload",props:{api:{type:String,required:!0},token:{type:String,required:!0},headers:{type:Object},maxSize:{type:Number,default:null},multiple:{type:Boolean},extension:{type:String,required:!0},size:{type:String,default:"small"},showprogress:{type:Boolean,default:!1}},components:{VueUploadList:l},data:function(){return{filelist:[],uploadedFiles:[],start:0,progress:0,show:!1}},watch:{filelist:{immediate:!0,handler:function(e){e&&(this.progress=0,this.show=!1)}}},computed:{extensionFileDescraption:function(){return(null!=this.extension?this.extension.replace(/[^,a-zA-Z ]/g," ").replace("application","").replace("document","").replace("officedocument",""):"all files").toUpperCase()},allowMultiple:function(){return{multiple:this.multiple}},progressWidth:function(){return"width : ".concat(this.progress,"%")},_localization:function(){var e=Math.floor(this.maxSize/1024/1024),t="ar"===document.documentElement.lang.toLowerCase(),i={dropFileMsg:"Drag and drop file here or",chooseFileMsg:"Choose file",extensionFileText:"Allowed file formats (max - ".concat(e," MB): ").concat(this.extensionFileDescraption)},s={dropFileMsg:"إسقاط الملفات هنا للتحميل أو",chooseFileMsg:"اختر الملف",extensionFileText:"تنسيقات الملفات المسموح بها (أقصى حد - ".concat(e,"ميجابايت): ").concat(this.extensionFileDescraption)};return t?s:i}},methods:{onChange:function(e){this.$refs.file.files.length&&(this.multiple?this.filelist=[].concat(c(this.filelist),c(this.$refs.file.files)):(this.show=!1,this.filelist=c(this.$refs.file.files)),e.target.value="")},showProgress:function(e){this.show=e},handleUploaded:function(e){var t={fileId:e.id,fileName:e.name,fileSize:e.size};this.uploadedFiles=[].concat(c(this.uploadedFiles),[t]),this.$emit("response",this.uploadedFiles)},setProgress:function(){this.start+=1,this.progress=this.start/this.filelist.length*100},handleDelete:function(e,t){this.filelist.splice(t,1);var i=this.uploadedFiles.indexOf((function(t){return t.fileId==e}));console.log(i,t),this.uploadedFiles.splice(i,1),this.$emit("response",this.uploadedFiles)},trigger:function(){this.$refs.file.click()},dragover:function(e){e.preventDefault()},dragleave:function(){},drop:function(e){e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(e)}}});t.default=d}});